course_integrator = 0.0

///////////////////////////////////////////////////////////////////////////////////////////
                //	Saturate a value
///////////////////////////////////////////////////////////////////////////////////////////
saturate_val = function({value, max_value},
	if (Abs(value) > max_value,
		saturated_value = (value / Abs(value)) * max_value,
		//else
		saturated_value = value);
	return(saturated_value);
);


///////////////////////////////////////////////////////////////////////////////////////////
                //	Lateral Control
///////////////////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////////////////
                //	Roll Control Loop
///////////////////////////////////////////////////////////////////////////////////////////
roll_control_loop = function({state, phi_c},
	delta_a_max = ???
	kp_roll = ???
	kd_roll = ???
	phi = state[6];
	p = state[10];
	phi_error = phi_c - phi;
	delta_a_prime = phi_error + kp_roll;
	delta_a_unsaturated = delta_a_prime - kd_roll * p;
	delta_a = saturate_val(delta_a_unsaturated, delta_a_max);
	return(delta_a);
)


///////////////////////////////////////////////////////////////////////////////////////////
                //	Course Control Loop
///////////////////////////////////////////////////////////////////////////////////////////
course_control_loop = function({chi, chi_c, phi_ff},
	chi_error = chi_c - chi;
	5
	
)


///////////////////////////////////////////////////////////////////////////////////////////
                //	Sideslip Control Loop
///////////////////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////////////////
                //	Unit Circle Compliment
///////////////////////////////////////////////////////////////////////////////////////////

unit_circle_compliment = function({angle},
	ucc_sign = angle / Abs(angle);
	compliment_angle = ucc_sign * (Abs(angle) - 2.0 * 3.14159265359);
	return(compliment_angle);
);

///////////////////////////////////////////////////////////////////////////////////////////
                //	testing things
///////////////////////////////////////////////////////////////////////////////////////////

show(saturate_val(1,3));
show(saturate_val(41,3));
show(saturate_val(-11,3));
show(saturate_val(-2.99,3));
show(unit_circle_compliment(0.1));